<div class="container">
  <div class="login">
    <h2>Зміна паролю</h2>
    @if (isValidating()) {
      <p>Перевірка посилання...</p>
    } @else if (!isTokenValid()) {
      <p class="error">Посилання недійсне або закінчився термін його дії.</p>
    } @else {
      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <div>
          <input [type]="showPassword() ? 'text' : 'password'"
                 formControlName="password"
                 placeholder="Новий пароль"
                 required>
          <span class="material-symbols-rounded"
                (click)="togglePassword()">
                    {{ showPassword() ? 'password_2_off' : 'password' }}
              </span>
        </div>
        <div>
          <input [type]="showPassword() ? 'text' : 'password'"
                 formControlName="confirmPassword"
                 placeholder="Підтвердження паролю"
                 required>
          <span class="material-symbols-rounded"
                (click)="togglePassword()">
                    {{ showPassword() ? 'password_2_off' : 'password' }}
              </span>
        </div>
        @if (errorMessage()) {
          <span class="valid-text">{{ errorMessage() }}</span>
        }
        @if (passwordsMismatch()) {
          <span class="error">Паролі не збігаються.</span>
        }
        <button type="submit" [disabled]="resetPasswordForm.invalid || isLoading() || passwordsMismatch()">
          {{ isLoading() ? 'Збереження...' : 'Зберегти новий пароль' }}
        </button>
        @if (successMessage()) {
          <span class="valid-text success">{{ successMessage() }}</span>
        }
      </form>
    }
  </div>
</div>
